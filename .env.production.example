# Production Environment Configuration Template
# Copy this file to .env.production and configure with your production values

# ========================================
# Application Configuration
# ========================================
FASTAPI_ENV=production
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=false

# ========================================
# Database Configuration
# ========================================
# Production PostgreSQL connection
POSTGRES_DB=image_classification_prod
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD
DATABASE_URL=postgresql://postgres:CHANGE_THIS_TO_SECURE_PASSWORD@postgres:5432/image_classification_prod

# Database performance settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_ECHO=false

# ========================================
# Redis Cache Configuration
# ========================================
REDIS_PASSWORD=CHANGE_THIS_TO_SECURE_REDIS_PASSWORD
REDIS_URL=redis://:CHANGE_THIS_TO_SECURE_REDIS_PASSWORD@redis:6379
REDIS_DB=0
REDIS_SOCKET_TIMEOUT=5
REDIS_CONNECTION_POOL_MAX_CONNECTIONS=20

# ========================================
# Security Configuration
# ========================================
# JWT tokens (generate secure random strings)
JWT_SECRET_KEY=CHANGE_THIS_TO_SUPER_SECURE_256_BIT_SECRET_KEY
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# CORS settings for production
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# Rate limiting (requests per time period)
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# ========================================
# AI Service Configuration
# ========================================
# Google Cloud Vision API
GOOGLE_CLOUD_VISION_API_KEY=your_google_cloud_vision_api_key_here
GOOGLE_CLOUD_PROJECT_ID=your_gcp_project_id

# Hugging Face (for additional models)
HUGGING_FACE_API_KEY=your_hugging_face_api_key_here

# OpenAI (if integrating GPT-based classification)
OPENAI_API_KEY=your_openai_api_key_here

# ========================================
# File Upload Configuration
# ========================================
MAX_FILE_SIZE=10485760  # 10MB in bytes
ALLOWED_EXTENSIONS=jpg,jpeg,png,webp,bmp
UPLOAD_FOLDER=/app/uploads
QUARANTINE_FOLDER=/app/quarantine

# File security settings
SCAN_UPLOADED_FILES=true
MAX_IMAGE_DIMENSION=4096
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/webp,image/bmp

# ========================================
# AI Model Configuration
# ========================================
DEFAULT_MODEL=imagenet_mobilenet_v2
MODEL_CACHE_SIZE=2147483648  # 2GB in bytes
GPU_ENABLED=false
MODEL_DOWNLOAD_TIMEOUT=300
MODEL_INFERENCE_TIMEOUT=30

# Model paths
MODEL_STORAGE_PATH=/app/models
CUSTOM_MODEL_PATH=/app/models/custom

# ========================================
# Performance Configuration
# ========================================
# Worker process settings
MAX_WORKERS=4
WORKER_CONNECTIONS=1000

# Cache settings
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=1000

# Request timeouts
REQUEST_TIMEOUT=30
CLASSIFICATION_TIMEOUT=60

# ========================================
# Monitoring & Logging
# ========================================
# Logging configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/image-classifier.log

# Metrics and monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# External monitoring services
SENTRY_DSN=https://your-sentry-dsn-here@sentry.io/project-id
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
DATADOG_API_KEY=your_datadog_api_key

# Health check configuration
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_INTERVAL=60
DEPENDENCY_CHECK_TIMEOUT=10

# ========================================
# Backup Configuration
# ========================================
# Database backup settings
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_LOCATION=/backups

# Cloud backup configuration
AWS_S3_BACKUP_BUCKET=your-backup-bucket
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# ========================================
# External Service Configuration
# ========================================
# CDN configuration
CDN_URL=https://cdn.your-domain.com
STATIC_FILES_URL=https://static.your-domain.com

# Email service (for notifications)
SMTP_SERVER=smtp.your-provider.com
SMTP_PORT=587
SMTP_USERNAME=your_smtp_username
SMTP_PASSWORD=your_smtp_password
FROM_EMAIL=noreply@your-domain.com

# ========================================
# Production Optimization
# ========================================
# Frontend build optimization
VITE_API_BASE_URL=https://api.your-domain.com
VITE_WS_URL=wss://api.your-domain.com/ws
VITE_ENVIRONMENT=production

# Performance monitoring
ENABLE_PROFILING=false
PROFILE_REQUESTS=false

# ========================================
# Grafana Configuration (Optional)
# ========================================
GRAFANA_PASSWORD=CHANGE_THIS_TO_SECURE_GRAFANA_PASSWORD
GRAFANA_ADMIN_USER=admin

# ========================================
# Docker Configuration
# ========================================
# Compose project name
COMPOSE_PROJECT_NAME=ai-classifier-prod

# Network configuration
DOCKER_NETWORK_SUBNET=172.20.0.0/16

# Volume configuration
POSTGRES_DATA_VOLUME=postgres-prod-data
REDIS_DATA_VOLUME=redis-prod-data
UPLOAD_DATA_VOLUME=ai-uploads-prod

# ========================================
# SSL Certificate Configuration
# ========================================
# SSL certificate paths (adjust based on your setup)
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem

# Let's Encrypt configuration
LETSENCRYPT_EMAIL=your-email@your-domain.com
LETSENCRYPT_DOMAIN=your-domain.com

# ========================================
# IMPORTANT SECURITY NOTES
# ========================================
# 1. Change ALL "CHANGE_THIS_TO_*" values to secure random strings
# 2. Use a password manager to generate secure passwords
# 3. Never commit this file with real credentials to version control
# 4. Regularly rotate passwords and API keys
# 5. Use environment-specific secret management in production
# 6. Enable audit logging for all production environments